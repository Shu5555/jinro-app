役職抽選機能について

1 抽選方法の変更

※現在の人数設定

村人陣営
人狼陣営
第三陣営
この三つの人数を設定し、それぞれroles.csvから人数分だけランダムに割り当てる。


※変更後

村人陣営
	- 占い師系
	- 霊媒師系
	- 騎士系
	- 一般
人狼陣営
	- 人狼
	- 狂人
第三陣営


2 人数設定について

今まで通り、人数を自由に設定することができ、その人数だけ抽選する。
ただし、占い師の設定可能人数は一人以上である。


3 役職データについて

今まで、roles.csvに全陣営の役職データを格納していた。
それをやめ、各陣営ごとに別のファイルにデータを格納し、それぞれ読み込むように変更する。

村人陣営　villager-roles.csv
人狼陣営　murder-roles.csv
第三陣営　3rd-roles.csv

※現在
「役職名」「陣営」「能力」「勝利条件」「製作者」

※変更後　陣営によってデータ構造が変わる
村人陣営
「役職名」「陣営」「分類」「能力」「AI確率構文」「占い結果」「関連役職」「関連役職人数」「勝利条件」「製作者」

人狼陣営
「役職名」「陣営」「分類」「能力」「AI確率構文」「占い結果」「関連役職」「関連役職人数」「勝利条件」「製作者」

第三陣営

「役職名」「陣営」「能力」「AI確率構文」「占い結果」「関連役職」「関連役職人数」「勝利条件」「製作者」

また、データ構造の変更に伴い、CsvConverterAppを廃止する。
変換アプリの代わりに、役職データ生成アプリを作る。
これに関しては役職データ生成アプリ.txtを参照してください。


4 役職抽選について
以下の条件にそって抽選する。
　1　「関連役職」が設定されているとき、必ず指定されている役職を指定されている人数だけ抽選する。
　2　占い師系の人数が0人に設定されているとき、確認用のポップアップを表示する。

バグを未然に防ぐためのアイデア
1　各陣営、設定人数だけ役職を抽選する。（この時点ではプレイヤーと役職は結びつけない）
2　選ばれた役職に、関連役職が設定されているものがあれば、「関連役職人数」分だけ役職を減らすなどする。
こうすることで、抽選後の役職数がプレイヤー数を超えてしまいエラーが発生することがないようにできる。
他にいい案や改案があれば積極的に取り入れる。

5 役職確認の内容
今までと同じで、新しいデータ構造に対応できるように直す。

適宜、プログラムを修正する。